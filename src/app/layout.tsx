import type {Metadata} from "next";
import "./globals.css";
import "./navigationHub.css";
import {ToastProvider} from '@/components/common/Toast';
import {AppProviders} from "@/providers/AppProvider";
import {getGeneralSettingByCache} from "@/app/api/systemSetting/generalSetting/route";

// 从服务端直接获取设置
const generalSetting = await getGeneralSettingByCache();

export const metadata: Metadata = {
    title: generalSetting.systemName,
    description: "Generated by create next app",
};

export default async function RootLayout({
                                             children
                                         }: Readonly<{
    children: React.ReactNode;
}>) {
    return (
        <html lang='en'>
        <body className={`antialiased`}>
        <AppProviders generalSetting={generalSetting}>
            <ToastProvider>
                {children}
            </ToastProvider>
        </AppProviders>
        </body>
        </html>
    );
}
